"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[259],{648:function(e,t,o){var n=o(1376),r=o(4354),c=o(9039),i=o(7975),s=o(720),a=o(7138),u=o(4498),f=o(1038),m=o(9247),g=o(8675),l=o(5528),y=o(5469),w=o(9847),d=o(5783),G=o(2010),Z=o(1372),P=o(1318),v=o(2810);const E=new G.Z({source:new w.Z}),S=new d.Z,C=new c.ZP({fill:new i.Z({color:"rgba(255, 255, 255, 0.2)"}),stroke:new s.Z({color:"#33cc33",width:2}),image:new a.Z({radius:7,fill:new i.Z({color:"#ffcc33"})})}),p=new c.ZP({geometry:function(e){return e.get("modifyGeometry")||e.getGeometry()},fill:new i.Z({color:"rgba(255, 255, 255, 0.2)"}),stroke:new s.Z({color:"#ff3333",width:2}),image:new a.Z({radius:7,fill:new i.Z({color:"rgba(0, 0, 0, 0)"})})}),h=new Z.Z({source:S,style:function(e){return"GeometryCollection"===e.getGeometry().getType()?p:C}}),k=new n.Z({layers:[E,h],target:"map",view:new r.ZP({center:[-11e6,66e5],zoom:3})}),I=new u.Z({source:S}).getOverlay().getStyleFunction(),b=new u.Z({source:S,style:function(e){return e.get("features").forEach((function(t){const o=t.get("modifyGeometry");if(o){const n=e.getGeometry().getCoordinates(),r=t.getGeometry().getGeometries(),c=r[0].getCoordinates()[0],i=r[1].getCoordinates(),s=k.getView().getProjection();let a,u,f;n[0]===i[0]&&n[1]===i[1]?(a=(0,v.vs)(c[0],s,"EPSG:4326"),u=(0,v.vs)(c[(c.length-1)/2],s,"EPSG:4326"),f=(0,P.Sp)(a,u)/2):(a=(0,v.vs)(i,s,"EPSG:4326"),u=(0,v.vs)(n,s,"EPSG:4326"),f=(0,P.Sp)(a,u));const m=(0,l.iu)((0,v.vs)(i,s,"EPSG:4326"),f,128);m.transform("EPSG:4326",s),r[0].setCoordinates(m.getCoordinates()),o.setGeometries(r)}})),I(e)}});let F,T;b.on("modifystart",(function(e){e.features.forEach((function(e){const t=e.getGeometry();"GeometryCollection"===t.getType()&&e.set("modifyGeometry",t.clone(),!0)}))})),b.on("modifyend",(function(e){e.features.forEach((function(e){const t=e.get("modifyGeometry");t&&(e.setGeometry(t),e.unset("modifyGeometry",!0))}))})),k.addInteraction(b);const j=document.getElementById("type");function z(){let e,t=j.value;"Geodesic"===t&&(t="Circle",e=function(e,t,o){t||(t=new g.Z([new l.ZP([]),new y.Z(e[0])]));const n=t.getGeometries(),r=(0,v.vs)(e[0],o,"EPSG:4326"),c=(0,v.vs)(e[1],o,"EPSG:4326"),i=(0,P.Sp)(r,c),s=(0,l.iu)(r,i,128);return s.transform("EPSG:4326",o),n[0].setCoordinates(s.getCoordinates()),t.setGeometries(n),t}),F=new f.ZP({source:S,type:t,geometryFunction:e}),k.addInteraction(F),T=new m.Z({source:S}),k.addInteraction(T)}j.onchange=function(){k.removeInteraction(F),k.removeInteraction(T),z()},z()}},function(e){var t=function(t){return e(e.s=t)};t(9877),t(648)}]);
//# sourceMappingURL=draw-and-modify-geodesic.js.map