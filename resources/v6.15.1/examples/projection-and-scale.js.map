{"version":3,"file":"projection-and-scale.js","mappings":"kKAWA,MAAMA,EAAiBC,SAASC,eAAe,mBACzCC,GAAaC,EAAAA,EAAAA,IAAcJ,EAAeK,OAE1CC,EAAe,IAAIC,EAAAA,EAAU,CACjCC,MAAO,SACPC,KAAK,EACLC,MAAO,EACPC,MAAM,EACNC,SAAU,MAGNC,EAAM,IAAIC,EAAAA,EAAI,CAClBC,UAAUC,EAAAA,EAAAA,MAAkBC,OAAO,CAACX,IACpCY,OAAQ,CACN,IAAIC,EAAAA,EAAU,CACZC,OAAQ,IAAIC,EAAAA,KAGhBC,OAAQ,MACRC,KAAM,IAAIC,EAAAA,GAAK,CACbC,QAAQC,EAAAA,EAAAA,IAAU,CAAC,EAAG,IAAK,YAAavB,GACxCwB,KAAM,EACNxB,WAAYA,MA6BhBH,EAAe4B,iBAAiB,UAzBhC,WACE,MAAMC,EAAchB,EAAIiB,UAClBC,EAAoBF,EAAYzB,gBAChC4B,GAAgB5B,EAAAA,EAAAA,IAAcJ,EAAeK,OAC7C4B,EAAoBJ,EAAYK,gBAChCC,EAAgBN,EAAYO,YAC5BC,EAAkBR,EAAYS,cAC9BC,GAAYb,EAAAA,EAAAA,IAAUS,EAAeJ,EAAmBC,GACxDQ,EAAaT,EAAkBU,mBAC/BC,EAASV,EAAcS,mBAMvBE,EACHV,IALDW,EAAAA,EAAAA,IAAmBb,EAAmB,EAAIS,EAAYL,EAAe,KACrEK,KAEAI,EAAAA,EAAAA,IAAmBZ,EAAe,EAAIU,EAAQH,EAAW,KAAOG,GAG5DG,EAAU,IAAIrB,EAAAA,GAAK,CACvBC,OAAQc,EACRO,WAAYH,EACZI,SAAUV,EACVlC,WAAY6B,IAEdnB,EAAImC,QAAQH,Q","sources":["webpack:///./projection-and-scale.js"],"sourcesContent":["import Map from '../src/ol/Map.js';\nimport OSM from '../src/ol/source/OSM.js';\nimport TileLayer from '../src/ol/layer/Tile.js';\nimport View from '../src/ol/View.js';\nimport {ScaleLine, defaults as defaultControls} from '../src/ol/control.js';\nimport {\n  getPointResolution,\n  get as getProjection,\n  transform,\n} from '../src/ol/proj.js';\n\nconst viewProjSelect = document.getElementById('view-projection');\nconst projection = getProjection(viewProjSelect.value);\n\nconst scaleControl = new ScaleLine({\n  units: 'metric',\n  bar: true,\n  steps: 4,\n  text: true,\n  minWidth: 140,\n});\n\nconst map = new Map({\n  controls: defaultControls().extend([scaleControl]),\n  layers: [\n    new TileLayer({\n      source: new OSM(),\n    }),\n  ],\n  target: 'map',\n  view: new View({\n    center: transform([0, 52], 'EPSG:4326', projection),\n    zoom: 6,\n    projection: projection,\n  }),\n});\n\nfunction onChangeProjection() {\n  const currentView = map.getView();\n  const currentProjection = currentView.getProjection();\n  const newProjection = getProjection(viewProjSelect.value);\n  const currentResolution = currentView.getResolution();\n  const currentCenter = currentView.getCenter();\n  const currentRotation = currentView.getRotation();\n  const newCenter = transform(currentCenter, currentProjection, newProjection);\n  const currentMPU = currentProjection.getMetersPerUnit();\n  const newMPU = newProjection.getMetersPerUnit();\n  const currentPointResolution =\n    getPointResolution(currentProjection, 1 / currentMPU, currentCenter, 'm') *\n    currentMPU;\n  const newPointResolution =\n    getPointResolution(newProjection, 1 / newMPU, newCenter, 'm') * newMPU;\n  const newResolution =\n    (currentResolution * currentPointResolution) / newPointResolution;\n  const newView = new View({\n    center: newCenter,\n    resolution: newResolution,\n    rotation: currentRotation,\n    projection: newProjection,\n  });\n  map.setView(newView);\n}\nviewProjSelect.addEventListener('change', onChangeProjection);\n"],"names":["viewProjSelect","document","getElementById","projection","getProjection","value","scaleControl","ScaleLine","units","bar","steps","text","minWidth","map","Map","controls","defaultControls","extend","layers","TileLayer","source","OSM","target","view","View","center","transform","zoom","addEventListener","currentView","getView","currentProjection","newProjection","currentResolution","getResolution","currentCenter","getCenter","currentRotation","getRotation","newCenter","currentMPU","getMetersPerUnit","newMPU","newResolution","getPointResolution","newView","resolution","rotation","setView"],"sourceRoot":""}