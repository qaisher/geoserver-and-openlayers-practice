"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5758],{8536:function(e,n,t){var r=t(1376),o=t(4354),c=t(349),a=t(4894),i=t(7103),s=t(1712),u=t(1118),l=t(277),f=t(985),d=t(9847),g=t(5783),m=t(2010),w=t(1372);const p=new JSZip;function Z(e){let n;p.load(e);const t=p.file(/.kml$/i)[0];return t&&(n=t.asText()),n}function b(e){let n=e,t=window.location.href;if(t=t.slice(0,t.lastIndexOf("/")+1),0===e.indexOf(t)){const r=new RegExp(e.replace(t,"")+"$","i"),o=p.file(r)[0];o&&(n=URL.createObjectURL(new Blob([o.asArrayBuffer()])))}return n}class h extends i.ZP{constructor(e){const n=e||{};n.iconUrlFunction=b,super(n)}getType(){return"arraybuffer"}readFeature(e,n){const t=Z(e);return super.readFeature(t,n)}readFeatures(e,n){const t=Z(e);return super.readFeatures(t,n)}}const k=new c.Z({formatConstructors:[h,s.Z,u.Z,l.Z,i.ZP,f.Z]}),v=new r.Z({interactions:(0,a.ce)().extend([k]),layers:[new m.Z({source:new d.Z})],target:"map",view:new o.ZP({center:[0,0],zoom:2})});k.on("addfeatures",(function(e){const n=new g.Z({features:e.features});v.addLayer(new w.Z({source:n})),v.getView().fit(n.getExtent())}));const x=function(e){const n=[];if(v.forEachFeatureAtPixel(e,(function(e){n.push(e)})),n.length>0){const e=[];let t,r;for(t=0,r=n.length;t<r;++t){const r=n[t].get("description")||n[t].get("name")||n[t].get("_name")||n[t].get("layer");r&&e.push(r)}document.getElementById("info").innerHTML=e.join("<br/>")||"&nbsp"}else document.getElementById("info").innerHTML="&nbsp;"};v.on("pointermove",(function(e){if(e.dragging)return;const n=v.getEventPixel(e.originalEvent);x(n)})),v.on("click",(function(e){x(e.pixel)}));const y=document.getElementById("download");document.getElementById("download-kmz").addEventListener("click",(function(){var e;e="iceland.kmz",fetch("data/kmz/iceland.kmz").then((function(e){return e.blob()})).then((function(n){navigator.msSaveBlob?navigator.msSaveBlob(n,e):(y.href=URL.createObjectURL(n),y.download=e,y.click())}))}))}},function(e){var n=function(n){return e(e.s=n)};n(9877),n(8536)}]);
//# sourceMappingURL=drag-and-drop-custom-kmz.js.map