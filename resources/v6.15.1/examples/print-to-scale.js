"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5440],{5518:function(e,t,n){var o=n(1376),s=n(2010),a=n(4354),i=n(1327),r=n(9912),l=n(4739),c=n(5830),d=n(1769),u=n(2810),g=n(5421);l.Z.defs("EPSG:27700","+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +towgs84=446.448,-125.157,542.06,0.15,0.247,0.842,-20.489 +units=m +no_defs"),(0,g.z)(l.Z);const p=(0,u.U2)("EPSG:27700");p.setExtent([0,0,7e5,13e5]);const m=new s.Z;fetch("https://tiles.arcgis.com/tiles/qHLhLQrcvEnxjtPr/arcgis/rest/services/OS_Open_Raster/MapServer/WMTS").then((function(e){return e.text()})).then((function(e){const t=(new r.Z).read(e),n=(0,i.B)(t,{layer:"OS_Open_Raster"});n.attributions="Contains OS data Â© Crown Copyright and database right "+(new Date).getFullYear(),n.crossOrigin="",n.projection=p,n.wrapX=!1,m.setSource(new i.Z(n))}));const h=new o.Z({layers:[m],controls:(0,c.ce)({attributionOptions:{collapsible:!1}}),target:"map",view:new a.ZP({center:[373500,436500],projection:p,zoom:7})}),w=new d.Z({bar:!0,text:!0,minWidth:125});h.addControl(w);const f={a0:[1189,841],a1:[841,594],a2:[594,420],a3:[420,297],a4:[297,210],a5:[210,148]},y={useCORS:!0,ignoreElements:function(e){const t=e.className||"";return!(-1===t.indexOf("ol-control")||t.indexOf("ol-scale")>-1||t.indexOf("ol-attribution")>-1&&t.indexOf("ol-uncollapsible"))}},E=document.getElementById("export-pdf");E.addEventListener("click",(function(){E.disabled=!0,document.body.style.cursor="progress";const e=document.getElementById("format").value,t=document.getElementById("resolution").value,n=document.getElementById("scale").value,o=f[e],s=Math.round(o[0]*t/25.4),a=Math.round(o[1]*t/25.4),i=h.getView().getResolution(),r=n/(0,u._Q)(h.getView().getProjection(),t/25.4,h.getView().getCenter());h.once("rendercomplete",(function(){y.width=s,y.height=a,html2canvas(h.getViewport(),y).then((function(t){const n=new jspdf.jsPDF("landscape",void 0,e);n.addImage(t.toDataURL("image/jpeg"),"JPEG",0,0,o[0],o[1]),n.save("map.pdf"),w.setDpi(),h.getTargetElement().style.width="",h.getTargetElement().style.height="",h.updateSize(),h.getView().setResolution(i),E.disabled=!1,document.body.style.cursor="auto"}))})),w.setDpi(t),h.getTargetElement().style.width=s+"px",h.getTargetElement().style.height=a+"px",h.updateSize(),h.getView().setResolution(r)}),!1)}},function(e){var t=function(t){return e(e.s=t)};t(9877),t(5518)}]);
//# sourceMappingURL=print-to-scale.js.map