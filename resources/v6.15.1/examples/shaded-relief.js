"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4600],{8449:function(t,n,e){var o=e(1376),a=e(4354),r=e(2010),s=e(6291),i=e(1998),u=e(7486),c=e(9847);const h=new i.Z({url:"https://{a-d}.tiles.mapbox.com/v3/aj.sf-dem/{z}/{x}/{y}.png",crossOrigin:"anonymous"}),l=new u.ZP({sources:[h],operationType:"image",operation:function(t,n){const e=t[0],o=e.width,a=e.height,r=e.data,s=new Uint8ClampedArray(r.length),i=2*n.resolution,u=o-1,c=a-1,h=[0,0,0,0],l=2*Math.PI,d=Math.PI/2,m=Math.PI*n.sunEl/180,f=Math.PI*n.sunAz/180,p=Math.cos(m),v=Math.sin(m);let w,M,g,Z,y,E,x,I,P,b,k,z,A,C,T;function B(t){return t[0]+2*t[1]+3*t[2]}for(M=0;M<=c;++M)for(y=0===M?0:M-1,E=M===c?c:M+1,w=0;w<=u;++w)g=0===w?0:w-1,Z=w===u?u:w+1,x=4*(M*o+g),h[0]=r[x],h[1]=r[x+1],h[2]=r[x+2],h[3]=r[x+3],I=n.vert*B(h),x=4*(M*o+Z),h[0]=r[x],h[1]=r[x+1],h[2]=r[x+2],h[3]=r[x+3],P=n.vert*B(h),b=(P-I)/i,x=4*(y*o+w),h[0]=r[x],h[1]=r[x+1],h[2]=r[x+2],h[3]=r[x+3],I=n.vert*B(h),x=4*(E*o+w),h[0]=r[x],h[1]=r[x+1],h[2]=r[x+2],h[3]=r[x+3],P=n.vert*B(h),k=(P-I)/i,z=Math.atan(Math.sqrt(b*b+k*k)),A=Math.atan2(k,-b),A=A<0?d-A:A>d?l-A+d:d-A,C=v*Math.cos(z)+p*Math.sin(z)*Math.cos(f-A),x=4*(M*o+w),T=255*C,s[x]=T,s[x+1]=T,s[x+2]=T,s[x+3]=r[x+3];return{data:s,width:o,height:a}}}),d=(new o.Z({target:"map",layers:[new r.Z({source:new c.Z}),new s.Z({opacity:.3,source:l})],view:new a.ZP({extent:[-13675026,4439648,-13580856,4580292],center:[-13615645,4497969],minZoom:10,maxZoom:16,zoom:13})}),{});["vert","sunEl","sunAz"].forEach((function(t){const n=document.getElementById(t),e=document.getElementById(t+"Out"),o=function(){e.innerText=n.value,l.changed()};n.addEventListener("input",o),n.addEventListener("change",o),e.innerText=n.value,d[t]=n})),l.on("beforeoperations",(function(t){const n=t.data;n.resolution=t.resolution;for(const t in d)n[t]=Number(d[t].value)}))}},function(t){var n=function(n){return t(t.s=n)};n(9877),n(8449)}]);
//# sourceMappingURL=shaded-relief.js.map