"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[350],{2786:function(e,t,n){var o=n(2739),r=n(5265),s=n(1376),i=n(4703),a=n(5783),c=n(4354),f=n(9039),h=n(720),l=n(2010),g=n(1372),u=n(8164),w=n(6923);const d=new l.Z({source:new i.Z({layer:"toner"})}),m=new s.Z({layers:[d],target:"map",view:new c.ZP({center:[-11e6,46e5],zoom:2})}),y=new f.ZP({stroke:new h.Z({color:"#EAE911",width:2})}),Z=new a.Z({attributions:'Flight data by <a href="https://openflights.org/data.html">OpenFlights</a>,',loader:function(){fetch("data/openflights/flights.json").then((function(e){return e.json()})).then((function(e){const t=e.flights;for(let e=0;e<t.length;e++){const n=t[e],s=n[0],i=n[1],a=new arc.GreatCircle({x:s[1],y:s[0]},{x:i[1],y:i[0]}).Arc(100,{offset:10}),c=[];a.geometries.forEach((function(e){const t=new r.Z(e.coords);t.transform("EPSG:4326","EPSG:3857"),c.push(new o.Z({geometry:t,finished:!1}))})),G(c,50*e)}d.on("postrender",E)}))}}),p=new g.Z({source:Z,style:function(e){return e.get("finished")?y:null}});m.addLayer(p);function E(e){const t=(0,u.u3)(e),n=e.frameState;t.setStyle(y);const o=Z.getFeatures();for(let e=0;e<o.length;e++){const s=o[e];if(!s.get("finished")){const e=s.getGeometry().getCoordinates(),o=n.time-s.get("start");if(o>=0){const n=.02*o;n>=e.length&&s.set("finished",!0);const i=Math.min(n,e.length),a=new r.Z(e.slice(0,i)),c=(0,w.dz)(m.getView().getProjection().getExtent()),f=Math.floor(m.getView().getCenter()[0]/c);a.translate(f*c,0),t.drawGeometry(a),a.translate(c,0),t.drawGeometry(a)}}}m.render()}function G(e,t){window.setTimeout((function(){let t=Date.now();e.forEach((function(e){e.set("start",t),Z.addFeature(e);const n=(e.getGeometry().getCoordinates().length-1)/.02;t+=n}))}),t)}}},function(e){var t=function(t){return e(e.s=t)};t(9877),t(2786)}]);
//# sourceMappingURL=flight-animation.js.map